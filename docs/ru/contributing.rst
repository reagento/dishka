Вклад в проект (Contributing)
********************************

``dishka`` — это проект с открытым исходным кодом, и мы рады новым разработчикам, которые хотят присоединиться к нам.

Начало работы
========================

1. Склонируйте проект:

.. code-block::

    git clone git@github.com:reagento/dishka.git
    cd dishka

2. Создайте и активируйте виртуальное окружение:

.. code-block::

    python3 -m venv .venv
    source .venv/bin/activate

3. Установить инструменты разработки и сам проект:

.. code-block::

    pip install -r requirements_dev.txt
    uv pip install -e .

Запуск линтеров
=====================

Сейчас мы используем ``ruff`` для проверки кода. Чтобы запустить его, выполните:

.. code-block::

    ruff check

Мы не применяем ruff для форматирования всего кода — форматируйте только свои изменения.
Некоторые проверки могут ошибаться, поэтому перед игнорированием предупреждений перепроверяйте код.


Запуск тестов
========================

Проект включает несколько типов тестов:

* Модульные тесты самой библиотеки
* Интеграционные тесты с другими библиотеками
* Тесты демонстрационного приложения

Все их можно запустить через nox:

.. code-block::

    nox

Запуск интеграционных тестов для всех поддерживаемых версий:

.. code-block::

    nox -t aiohttp

Все интеграционные тесты по умолчанию используют определённые версии библиотек.
Для запуска с последними версиями нужно указать это явно. Например:

.. code-block::

    nox -s aiohttp_latest

Все файлы с зависимостями для тестов находятся в директории ``/requirements``.


Сборка документации
==============================

Документация создаётся с помощью Sphinx. В первую очередь, вам может понадобиться установить ``make`` в вашей системе.
Затем установите зависимости для документации:

.. code-block::

    pip install -r requirements_doc.txt

Скомпилируйте документацию:

.. code-block::

    make html

Откройте файл ``docs-build/html/index.html`` в вашем браузере.


Отправка изменений
============================

Мы приветствуем новые идеи и Pull Request'ы, но можем запросить дополнительное обсуждение, если изменения затрагивают внутреннюю структуру или API.
Перед отправкой нового Pull Request убедитесь, что все тесты и линтеры были успешно выполнены.